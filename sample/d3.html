<!DOCTYPE HTML>
<html>
  <head>
    <style>
      body {
        margin: 10px;
        padding: 10px;
      }
      #myCanvas {
        border: 1px solid #9C9898;
      }
    </style>
	<script type="text/javascript" charset="utf-8" src="../dist/ncanvas.js"></script>

    <script type="text/javascript" src="http://mbostock.github.com/d3/d3.js?2.3.2"></script>
	
	<script language="javascript">
	
	d3.ns.prefix.custom = "http://github.com/mbostock/d3/examples/dom";
	
	var anim;
	var ncanvas;
	var rect;
	window.onload = function(){

		ncanvas = $nc.select(document.getElementById("myCanvas"), document);		
		ncanvas.size(400, 400).background("#cfcfcf").style({strokeStyle:"yellow", fillStyle: "yellow"});

			
		// Register the "custom" namespace prefix for our custom elements.
		d3.ns.prefix.ncanvas = "http://ncanvas";

		var w = 960,
			h = 500;

		var sketch = d3.select("body").append("ncanvas:d3")
			.attr("width", w)
			.attr("height", h)
			.call(custom);

		// On each mouse move, create a circle that increases in size and fades away.
		  sketch.append("ncanvas:rect")
			  .attr("x", 10)
			  .attr("y", 10)
			  .attr("radius", 10)
			  .attr("strokeStyle", "red");

	}

	function custom(selection) {
	  
	  selection.each(function() {
	  
		var root = this;

		ncanvas.anim({
				tick: function(){
					for (var child = root.firstChild; child; child = child.nextSibling) draw(child);
				},
				isRunning: true
		});

		function draw(element) {
		  switch (element.tagName) {
			case "rect": {
				ncanvas.fillRect({x:200, y:200, width:50, height: 50}).style({fillStyle:"blue", lineWidth:5, strokeStyle: "red"});
			  break;
			}
		  }
		}
	  });
	};
	
	
    </script>

  </head>
  <body>
	<canvas id="myCanvas"></canvas>    
	
		<button value="Animate" onClick="anim.isRunning=!anim.isRunning">Pause</button>
		<button value="Add" onClick="addRect();">Add</button>

  </body>
</html>